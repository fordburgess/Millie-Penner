<%= stylesheet_link_tag 'zine_show.css' %>
<div id="<%= dom_id zine %>" class="h-screen w-screen py-24 lg:p-16 flex flex-col lg:flex-row relative border-box bg-cover overflow-y-scroll" style="box-sizing: border-box">
  <%= link_to "<-- All Zines", zines_path, class: "absolute top-10 left-7 z-50 underline font-windowsRegular" %>
  <div class="w-full h-full lg:h-full lg:w-2/3 lg:mr-8 border-box" id="zine-container">
    
  
      <div class="relative h-3/4 w-full">
        <div class="page-flip" id="page-flip-1">
          <div id="r1-first">
            <div id="p1-first">
              <div style="background-image: url(<%= rails_blob_url(zine.pdf_images[0]) %>)"></div>
            </div>
          </div>
          
          <div id="r3-first">
            <div id="p3-first">
              <div style="background-image: url(<%= rails_blob_url(zine.pdf_images[1]) %>)"></div>
            </div>
          </div>
                
        </div>
        <div class="page-flip" id="page-flip-2">
          <div id="r1-second">
            <div id="p1-second">
              <div style="background-image: url(<%= rails_blob_url(zine.pdf_images[2]) %>)"></div>
            </div>
          </div>          
          <div id="r3-second">
            <div id="p3-second">
              <div style="background-image: url(<%= rails_blob_url(zine.pdf_images[3]) %>)"></div>
            </div>
          </div>                
        </div>
      </div>
    <div class="flex items-center justify-center pb-8 lg:pb-0 w-full">      
      <a target="_blank" href="<%= @zine.pdf_url %>" class="classic-button-1 mr-2 lg:mr-8 w-[150px] lg:w-auto lg:px-20 bg-black text-white text-center">Preview zine</a>      
      <%= button_to "Add to Cart", add_to_cart_path(zine), data: { zine_id: zine.id }, class: "classic-button-1 lg:px-[80px]", id: "add-to-cart-button", data: { zine_id: zine.id } %>
    </div>
  </div>
  <div class="w-screen h-auto lg:w-1/3 px-8 lg:px-0 text-left font-lexendZetta box-border">
    <h1 class="text-lg lg:text-4xl font-bold lg:font-thin mb-4 lg:mb-8"><%= zine.title %></h1>
    <p class="price mb-4 lg:mb-8 text-base lg:text-xl"><strong>Price:</strong> <%= sprintf('%.2f', zine.price) %> GBP</p>
    <p class="mb-4 lg:mb-8 text-base lg:text-xl"><strong>Size:</strong> <%= zine.size %></p>
    <p class="mb-4 lg:mb-8 text-base lg:text-xl"><strong>Pages:</strong> <%= zine.pages %></p>
    <p class="mb-2 lg:mb-0 text-base lg:text-xl"><strong>Includes:</strong></p>
    <% zine.description.split(",").each do |string| %>
      <p class="mb-2 text-base font-normal"><%= string %></p>
    <% end %>
  </div>

  <% if action_name != "show" %>
    <%= link_to "Show this zine", zine, class: "rounded-lg py-3 px-5 bg-gray-100 inline-block font-medium" %>
    <%= link_to "Edit this zine", edit_zine_path(zine), class: "rounded-lg py-3 ml-2 px-5 bg-gray-100 inline-block font-medium" %>
    <hr class="mt-6">
  <% end %>
</div>

<script>
  document.addEventListener("turbo:load", () => {
    var p3first = document.getElementById("p3-first");
    var p3second = document.getElementById("p3-second");
    var pageFlip1 = document.getElementById("page-flip-1");
    var pageFlip1Bool = false;
    var pageFlip2Bool = false;

    var pageFlip2 = document.getElementById("page-flip-2");

    p3first.addEventListener("click", () => {
      if (!pageFlip1Bool) {
        pageFlip1.classList.add("flipped");
        pageFlip1Bool = true;
      }
      else {
        pageFlip1.classList.remove("flipped");
        pageFlip1Bool = false;
      }
    })

    p3second.addEventListener("click", () => {
      if (!pageFlip2Bool) {
        pageFlip2.classList.add("flipped");
        pageFlip2Bool = true;
      }
      else {
        pageFlip2.classList.remove("flipped");
        pageFlip2Bool = false;
      }
    })
  });
</script>